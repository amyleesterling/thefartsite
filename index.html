<!DOCTYPE html>
<html>
<head>
    <title>Sophia and Cora's SFX Website</title>
    <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
    
    <style>
        body {
            /* Nature Methods inspired gradient */
            background: linear-gradient(135deg, #f14c93, #a64ca6, #4c82c1, #36a9e1);
            background-size: 400% 400%;
            min-height: 100vh; 
            margin: 0;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            font-family: 'Comic Sans MS', sans-serif; 
            color: white;
            transition: 0.5s;
            overflow: hidden; /* Prevents scrollbars from sparkles */
        }

        /* Drawing Canvas Layer */
        #drawing-board {
            position: fixed;
            top: 0; 
            left: 0;
            z-index: 1; /* Behind buttons */
            cursor: crosshair;
        }

        /* UI Layer - Keeps buttons clickable over the paint */
        .ui-layer {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            pointer-events: none; /* Allows clicks to pass through container */
        }

        .btn-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            pointer-events: auto;
        }

        /* Disco Animation */
        @keyframes disco {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .disco-mode {
            animation: disco 2s linear infinite;
        }

        /* Reactive Buttons */
        .btn {
            padding: 40px; 
            font-size: 50px; 
            margin: 15px; 
            cursor: pointer;
            border-radius: 30px; 
            border: none; 
            transition: 0.1s;
            box-shadow: 0 15px #00000033;
            pointer-events: auto;
            z-index: 20; /* ensure buttons sit above other UI elements when moved */
        }

        .btn:active {
            transform: scale(0.8) rotate(5deg);
            box-shadow: 0 5px #00000033;
        }

        #fart-btn { background: #8B4513; }
        #woosh-btn { background: #36a9e1; }
        #meow-btn { background: #b817aa; }
        #disco-btn { background: #ffcc00; font-size: 25px; padding: 20px; }
        #clear-btn { background: white; color: black; font-size: 20px; padding: 15px; }
        
        #runaway-btn { 
            background: #ff4747; 
            transition: left 0.3s ease-out, top 0.3s ease-out; /* Smooth slide */
        }

        /* Sparkle Style */
        .sparkle {
            position: absolute;
            pointer-events: none;
            font-size: 20px;
            animation: fadeOut 1s forwards;
            z-index: 15;
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-50px); }
        }
    </style>
</head>
<body id="main-body">

    <canvas id="drawing-board"></canvas>

    <div class="ui-layer">
        <h1>Sophia and Cora's Clickety Website</h1>
        
        <div class="btn-container">
            <button id="fart-btn" class="btn" onclick="megaEffect('fart', 'üí©')">üí©</button>
            <button id="woosh-btn" class="btn" onclick="megaEffect('woosh', '‚òÅÔ∏è')">‚òÅÔ∏è</button>
            <button id="meow-btn" class="btn" onclick="megaEffect('meow', 'üê±')">üê±</button>
            <button id="runaway-btn" class="btn" onmouseenter="runAway(this)" onclick="caughtIt()">üèÉ‚Äç‚ôÇÔ∏è</button>
        </div>

        <div style="margin-top: 20px; pointer-events: auto;">
            <button id="disco-btn" class="btn" onclick="remixBackground()">üï∫ BACKGROUND REMIX üíÉ</button>
            <button id="clear-btn" class="btn" onclick="clearCanvas()">üóëÔ∏è CLEAR PAINT</button>
        </div>
    </div>

    <script>
        const jsConfetti = new JSConfetti();
        const canvas = document.getElementById('drawing-board');
        const ctx = canvas.getContext('2d');
        let drawing = false;

        const sounds = {
            fart: new Audio('sfx/fart_1.mp3'),
            woosh: new Audio('sfx/woosh.mp3'),
            meow: new Audio('sfx/meow.mp3'),
            win: new Audio('sfx/win.mp3') // Ensure win.mp3 is in sfx folder!
        };

        // 1. Drawing Board Setup
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Start a fresh path when pressing down, and reset path when releasing or leaving the canvas.
        canvas.addEventListener('mousedown', (e) => {
            drawing = true;
            ctx.beginPath();
            ctx.moveTo(e.clientX, e.clientY);
        });
        canvas.addEventListener('mouseup', () => {
            drawing = false;
            // Reset the path so the next stroke doesn't connect to the previous one
            ctx.beginPath();
        });
        canvas.addEventListener('mouseleave', () => {
            drawing = false;
            ctx.beginPath();
        });

        canvas.addEventListener('mousemove', (e) => {
            if (!drawing) return;
            ctx.lineWidth = 15;
            ctx.lineCap = 'round';
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.4)'; // Glowy white paint
            ctx.lineTo(e.clientX, e.clientY);
            ctx.stroke();
            // keep the line continuous for this small segment, then start a new segment
            ctx.beginPath();
            ctx.moveTo(e.clientX, e.clientY);
        });

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // 2. The "Fair" Runaway Button
        function runAway(btn) {
            // small delay gives fast fingers a chance to click
            // reduce the move distance so it only "dodges" a little
            setTimeout(() => {
                // ensure absolute positioning so left/top work
                if (getComputedStyle(btn).position !== 'absolute') {
                    btn.style.position = 'absolute';
                    // set initial left/top so subsequent moves are relative to current location
                    const rect = btn.getBoundingClientRect();
                    btn.style.left = rect.left + 'px';
                    btn.style.top = rect.top + 'px';
                }

                const rect = btn.getBoundingClientRect();
                const maxOffset = 40; // moved down from 120 to make it only dodge a little
                const dx = (Math.random() * 2 - 1) * maxOffset; // -maxOffset..+maxOffset
                const dy = (Math.random() * 2 - 1) * maxOffset;

                let x = rect.left + dx;
                let y = rect.top + dy;

                // clamp to viewport so button doesn't disappear off-screen
                x = Math.max(0, Math.min(x, window.innerWidth - btn.offsetWidth));
                y = Math.max(0, Math.min(y, window.innerHeight - btn.offsetHeight));

                btn.style.left = x + 'px';
                btn.style.top = y + 'px';
            }, 300); // a slightly longer delay so quick clicks can still register
        }

        function caughtIt() {
            if(sounds.win) sounds.win.play();
            jsConfetti.addConfetti({ 
                emojis: ['üèÜ', 'üëë', '‚≠ê', 'üíé'], 
                emojiSize: 100, 
                confettiNumber: 100 
            });
            alert("SOPHIA AND CORA ARE THE CHAMPIONS!");
        }

        // 3. Background Remix - 100 emoji pool, pick 5 unique random emojis per click
        const EMOJI_POOL = [
          'üòÄ','üòÉ','üòÑ','üòÅ','üòÜ','üòÖ','üòÇ','ü§£','üòä','üòá',
          'üôÇ','üôÉ','üòâ','üòå','üòç','ü•∞','üòò','üòó','üòô','üòö',
          'üòã','üòú','ü§™','üòù','üòõ','ü§ë','ü§ó','ü§≠','ü§´','ü§î',
          'ü§®','üòê','üòë','üò∂','üôÑ','üòè','üòÆ',
          'üò≤','ü§§','üòµ','ü•¥','üëª','üëΩ','üëæ','ü§ñ','üéÉ',
          'üò∫','üò∏','üòπ','üòª','üòº','üòΩ','üôÄ','üòø','üòæ','üê∂',
          'üê±','üê≠','üêπ','üê∞','ü¶ä','üêª','üêº','üê®','üêØ','ü¶Å',
          'üêÆ','üê∑','üêΩ','üê∏','üêµ','üôà','üôâ','üôä','ü¶Ñ','üêù',
          'üå∏','üåº','üåª','üå∑','üåπ','üçÄ','üçÉ','üçÅ','üî•','‚ú®',
          'üí•','üí´','üéâ','üéä','üéà','üéµ','üé∂','üîî','‚≠ê','üåü'
        ];

        function remixBackground() {
            // change the page background to a new random gradient
            const gradients = [
              'linear-gradient(135deg, #f14c93, #a64ca6, #4c82c1, #36a9e1)',
              'linear-gradient(135deg, #ff9a9e, #fad0c4)',
              'linear-gradient(135deg, #a18cd1, #fbc2eb)',
              'linear-gradient(135deg, #f6d365, #fda085)',
              'linear-gradient(135deg, #84fab0, #8fd3f4)',
              'linear-gradient(135deg, #ffecd2, #fcb69f)',
              'linear-gradient(135deg, #66a6ff, #89f7fe)',
              'linear-gradient(135deg, #c2e59c, #64b3f4)'
            ];
            const newBg = gradients[Math.floor(Math.random() * gradients.length)];
            document.body.style.background = newBg;

            // briefly add disco animation so the background feels 'remixed'
            document.body.classList.add('disco-mode');
            setTimeout(() => document.body.classList.remove('disco-mode'), 2500);

            // still do the emoji confetti for fun
            const picked = [];
            while (picked.length < 5) {
                const idx = Math.floor(Math.random() * EMOJI_POOL.length);
                const e = EMOJI_POOL[idx];
                if (!picked.includes(e)) picked.push(e);
            }

            jsConfetti.addConfetti({
                emojis: picked,
                emojiSize: 80,
                confettiNumber: 60
            });
        }

        // 4. Standard Effects
        function megaEffect(type, emoji) {
            if(sounds[type]) {
                sounds[type].currentTime = 0;
                sounds[type].play();
            }
            jsConfetti.addConfetti({ 
                emojis: [emoji, '‚ú®', '‚≠ê'], 
                emojiSize: 100, 
                confettiNumber: 40 
            });
        }

        // 5. Sparkle Trail
        document.addEventListener('mousemove', (e) => {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.innerHTML = '‚ú®';
            sparkle.style.left = e.pageX + 'px';
            sparkle.style.top = e.pageY + 'px';
            document.body.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 1000);
        });
    </script>
</body>
</html>